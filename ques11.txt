#include <stdio.h>

int main() {
    int arr[] = {2, 3, -2, 4};
    int n = 4;
    int max_prod = arr[0], min_prod = arr[0], result = arr[0];

    for (int i = 1; i < n; i++) {
        if (arr[i] < 0) {
            int temp = max_prod;
            max_prod = min_prod;
            min_prod = temp;
        }
        if (arr[i] > max_prod * arr[i])
            max_prod = arr[i];
        else
            max_prod = max_prod * arr[i];

        if (arr[i] < min_prod * arr[i])
            min_prod = arr[i];
        else
            min_prod = min_prod * arr[i];

        if (result < max_prod)
            result = max_prod;
    }
    printf("Maximum product subarray = %d\n", result);
    return 0;
}